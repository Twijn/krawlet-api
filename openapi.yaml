openapi: 3.0.3
info:
  title: Krawlet API
  version: 1.0.0
  description: |
    REST API for the Krawlet Minecraft economy tracking system.

    ## Authentication
    Most endpoints support optional API key authentication via Bearer token. 
    Include your API key in the `Authorization` header:
    ```
    Authorization: Bearer kraw_your_api_key_here
    ```

    ## Rate Limiting
    - Anonymous requests: 100 requests/hour
    - Free tier: 1,000 requests/hour
    - Premium tier: 5,000 requests/hour

    Rate limit information is included in response headers:
    - `X-RateLimit-Limit`: Maximum requests per hour
    - `X-RateLimit-Remaining`: Requests remaining in current window
    - `X-RateLimit-Reset`: Unix timestamp when the limit resets

  contact:
    name: Krawlet API Support
    url: https://github.com/Twijn/krawlet-api

servers:
  - url: https://api.krawlet.cc
    description: Production API
  - url: http://localhost:3330/api
    description: Local development

security:
  - ApiKeyAuth: []
  - {}

tags:
  - name: Health
    description: API health checks
  - name: Players
    description: Player data and address lookups
  - name: Addresses
    description: Known Kromer addresses
  - name: Shops
    description: Shop information and inventory
  - name: Items
    description: Item listings and prices
  - name: Storage
    description: Ender storage data management
  - name: Reports
    description: ShopSync reports and change logs
  - name: API Key
    description: API key information and usage statistics

x-tagGroups:
  - name: Getting Started
    tags:
      - Health
  - name: Core API
    tags:
      - Players
      - Addresses
  - name: Shop Data
    tags:
      - Shops
      - Items
  - name: Data Management
    tags:
      - Storage
      - Reports
  - name: Account
    tags:
      - API Key

paths:
  /v1/health:
    get:
      tags: [Health]
      summary: Health check
      description: Check if the API is operational
      responses:
        '200':
          description: API is healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
              example:
                success: true
                data:
                  status: 'ok'
                  timestamp: '2026-01-12T10:30:00.000Z'
                meta:
                  timestamp: '2026-01-12T10:30:00.000Z'
                  elapsed: 5
                  version: '1.0.0'
                  requestId: 'abc-123'
                  rateLimit:
                    limit: 1000
                    remaining: 999
                    reset: 1736686200

  /v1/players:
    get:
      tags: [Players]
      summary: Get players
      description: |
        Retrieve players by addresses, names, UUIDs, or get all players.

        **Usage patterns:**
        - By address: `?addresses=ks0d5iqb6p` or `?addresses=ks0d5iqb6p,k12345678`
        - By name: `?names=Twijn` or `?names=Twijn,Player2`
        - By UUID: `?uuids=d98440d6-5117-4ac8-bd50-70b086101e3e`
        - All players: No query parameters

        Query parameters are mutually exclusive in practice but can technically be combined.
      parameters:
        - name: addresses
          in: query
          description: Comma-separated list of Kromer addresses to look up
          schema:
            type: string
          examples:
            single:
              value: 'ks0d5iqb6p'
              summary: Single address lookup
            multiple:
              value: 'ks0d5iqb6p,k12345678'
              summary: Multiple addresses
        - name: names
          in: query
          description: Comma-separated list of player names (case-insensitive)
          schema:
            type: string
          examples:
            single:
              value: 'Twijn'
              summary: Single player name
            multiple:
              value: 'Twijn,Player2'
              summary: Multiple player names
        - name: uuids
          in: query
          description: Comma-separated list of player UUIDs
          schema:
            type: string
          examples:
            single:
              value: 'd98440d6-5117-4ac8-bd50-70b086101e3e'
              summary: Single UUID lookup
            multiple:
              value: 'd98440d6-5117-4ac8-bd50-70b086101e3e,a1234567-89ab-cdef-0123-456789abcdef'
              summary: Multiple UUIDs
      responses:
        '200':
          description: List of players matching the query
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Player'
              examples:
                byAddress:
                  summary: Player by address
                  value:
                    success: true
                    data:
                      - name: 'Twijn'
                        uuid: 'd98440d6-5117-4ac8-bd50-70b086101e3e'
                        addresses: ['ks0d5iqb6p']
                    meta:
                      timestamp: '2026-01-13T10:30:00.000Z'
                      elapsed: 12
                      version: '1.0.0'
                      requestId: 'abc-123'
                byName:
                  summary: Player by name
                  value:
                    success: true
                    data:
                      - name: 'Twijn'
                        uuid: 'd98440d6-5117-4ac8-bd50-70b086101e3e'
                        addresses: ['ks0d5iqb6p']
                    meta:
                      timestamp: '2026-01-13T10:30:00.000Z'
                      elapsed: 8
                      version: '1.0.0'
                      requestId: 'def-456'
                byUuid:
                  summary: Player by UUID
                  value:
                    success: true
                    data:
                      - name: 'Twijn'
                        uuid: 'd98440d6-5117-4ac8-bd50-70b086101e3e'
                        addresses: ['ks0d5iqb6p']
                    meta:
                      timestamp: '2026-01-13T10:30:00.000Z'
                      elapsed: 10
                      version: '1.0.0'
                      requestId: 'ghi-789'

  /v1/shops:
    get:
      tags: [Shops]
      summary: Get all shops
      description: Retrieve a list of all shops with their items and addresses
      responses:
        '200':
          description: List of shops
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Shop'

    post:
      tags: [Shops]
      summary: Create or update shop
      description: Submit ShopSync data to create or update a shop (requires ShopSync authentication)
      security:
        - ShopSyncAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ShopSyncData'
      responses:
        '201':
          description: Shop updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /v1/shops/{id}:
    get:
      tags: [Shops]
      summary: Get shop by ID
      description: Retrieve detailed information about a specific shop
      parameters:
        - name: id
          in: path
          required: true
          description: Shop ID (computer ID)
          schema:
            type: string
      responses:
        '200':
          description: Shop details
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Shop'
        '404':
          description: Shop not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /shops/{id}/items:
    get:
      tags: [Shops]
      summary: Get shop items
      description: Retrieve all items/listings for a specific shop
      parameters:
        - name: id
          in: path
          required: true
          description: Shop ID
          schema:
            type: string
      responses:
        '200':
          description: List of items
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Item'

  /v1/items:
    get:
      tags: [Items]
      summary: Get all items
      description: Retrieve all item listings with prices
      responses:
        '200':
          description: List of items
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Item'

  /v1/addresses:
    get:
      tags: [Addresses]
      summary: Get known addresses
      description: Retrieve list of all known addresses
      responses:
        '200':
          description: List of known addresses
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/KnownAddress'

  /v1/storage:
    get:
      tags: [Storage]
      summary: Get ender storage data
      description: Retrieve the last stored ender storage data
      responses:
        '200':
          description: Ender storage data
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          data:
                            type: object
                          retrievedAt:
                            type: string
                            format: date-time
        '404':
          description: No storage data available
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    post:
      tags: [Storage]
      summary: Store ender storage data
      description: Submit new ender storage data (requires authentication)
      security:
        - EnderStorageAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Data stored successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /v1/reports/stats:
    get:
      tags: [Reports]
      summary: Get report statistics
      description: Retrieve overall statistics for ShopSync reports
      responses:
        '200':
          description: Report statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /v1/reports/validation-failures:
    get:
      tags: [Reports]
      summary: Get validation failures
      description: Retrieve recent validation failures
      parameters:
        - name: limit
          in: query
          description: Maximum number of records to return
          schema:
            type: integer
            default: 50
      responses:
        '200':
          description: Validation failures
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /v1/reports/successful-posts:
    get:
      tags: [Reports]
      summary: Get successful posts
      description: Retrieve recent successful ShopSync posts
      parameters:
        - name: limit
          in: query
          description: Maximum number of records to return
          schema:
            type: integer
            default: 50
      responses:
        '200':
          description: Successful posts
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /v1/reports/shop-changes:
    get:
      tags: [Reports]
      summary: Get shop changes
      description: Retrieve recent shop change events
      parameters:
        - name: limit
          in: query
          description: Maximum number of records to return
          schema:
            type: integer
            default: 50
        - name: shopId
          in: query
          description: Filter by shop ID
          schema:
            type: string
      responses:
        '200':
          description: Shop changes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /v1/reports/item-changes:
    get:
      tags: [Reports]
      summary: Get item changes
      description: Retrieve recent item change events
      parameters:
        - name: limit
          in: query
          description: Maximum number of records to return
          schema:
            type: integer
            default: 50
        - name: shopId
          in: query
          description: Filter by shop ID
          schema:
            type: string
      responses:
        '200':
          description: Item changes
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /v1/reports/shop-change-logs:
    get:
      tags: [Reports]
      summary: Get shop change logs
      description: Retrieve shop change logs from database
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
        - name: offset
          in: query
          schema:
            type: integer
        - name: shopId
          in: query
          schema:
            type: string
        - name: since
          in: query
          description: ISO 8601 date string
          schema:
            type: string
            format: date-time
        - name: until
          in: query
          description: ISO 8601 date string
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: Shop change logs
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /v1/reports/item-change-logs:
    get:
      tags: [Reports]
      summary: Get item change logs
      description: Retrieve item change logs from database
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
        - name: offset
          in: query
          schema:
            type: integer
        - name: shopId
          in: query
          schema:
            type: string
        - name: since
          in: query
          schema:
            type: string
            format: date-time
        - name: until
          in: query
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: Item change logs
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /v1/reports/price-change-logs:
    get:
      tags: [Reports]
      summary: Get price change logs
      description: Retrieve price change logs from database
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
        - name: offset
          in: query
          schema:
            type: integer
        - name: shopId
          in: query
          schema:
            type: string
        - name: since
          in: query
          schema:
            type: string
            format: date-time
        - name: until
          in: query
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: Price change logs
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /v1/apikey:
    get:
      tags: [API Key]
      summary: Get current API key info
      description: |
        Retrieve information about your current API key, including usage statistics.

        **Requires authentication:** This endpoint requires a valid API key.
      security:
        - ApiKeyAuth: []
      parameters:
        - name: usage
          in: query
          description: Set to 'false' to skip fetching detailed usage statistics
          schema:
            type: string
            enum: ['true', 'false']
            default: 'true'
      responses:
        '200':
          description: API key information
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ApiKeyInfo'
              example:
                success: true
                data:
                  id: 'a1b2c3d4-e5f6-7890-abcd-ef1234567890'
                  name: 'My Application'
                  email: 'user@example.com'
                  tier: 'free'
                  rateLimit: 1000
                  isActive: true
                  requestCount: 1234
                  lastUsedAt: '2026-01-25T10:30:00.000Z'
                  createdAt: '2026-01-12T10:00:00.000Z'
                  usage:
                    totalRequests: 1234
                    last24h: 50
                    last7d: 350
                    last30d: 1200
                    blockedRequests: 5
                    avgResponseTimeMs: 45.23
                    topEndpoints:
                      - path: '/v1/players'
                        count: 500
                      - path: '/v1/shops'
                        count: 300
                meta:
                  timestamp: '2026-01-25T10:30:00.000Z'
                  elapsed: 25
                  version: '1.0.0'
                  requestId: 'abc-123'
        '401':
          description: Unauthorized - API key required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                error:
                  code: 'UNAUTHORIZED'
                  message: 'API key required to access this endpoint'

  /v1/apikey/usage:
    get:
      tags: [API Key]
      summary: Get detailed usage statistics
      description: |
        Retrieve detailed usage statistics for your API key.

        **Requires authentication:** This endpoint requires a valid API key.
      security:
        - ApiKeyAuth: []
      responses:
        '200':
          description: Usage statistics
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ApiKeyUsage'
              example:
                success: true
                data:
                  totalRequests: 1234
                  last24h: 50
                  last7d: 350
                  last30d: 1200
                  blockedRequests: 5
                  avgResponseTimeMs: 45.23
                  topEndpoints:
                    - path: '/v1/players'
                      count: 500
                    - path: '/v1/shops'
                      count: 300
                meta:
                  timestamp: '2026-01-25T10:30:00.000Z'
                  elapsed: 15
                  version: '1.0.0'
                  requestId: 'def-456'
        '401':
          description: Unauthorized - API key required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /v1/apikey/logs:
    get:
      tags: [API Key]
      summary: Get recent request logs
      description: |
        Retrieve recent request logs for your API key.

        **Requires authentication:** This endpoint requires a valid API key.
      security:
        - ApiKeyAuth: []
      parameters:
        - name: limit
          in: query
          description: Maximum number of logs to return (max 100)
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 50
      responses:
        '200':
          description: Request logs
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          count:
                            type: integer
                          logs:
                            type: array
                            items:
                              $ref: '#/components/schemas/RequestLog'
              example:
                success: true
                data:
                  count: 2
                  logs:
                    - requestId: 'req-123'
                      timestamp: '2026-01-25T10:30:00.000Z'
                      method: 'GET'
                      path: '/v1/players'
                      responseStatus: 200
                      responseTimeMs: 45
                      wasBlocked: false
                      blockReason: null
                    - requestId: 'req-124'
                      timestamp: '2026-01-25T10:29:00.000Z'
                      method: 'GET'
                      path: '/v1/shops'
                      responseStatus: 200
                      responseTimeMs: 32
                      wasBlocked: false
                      blockReason: null
                meta:
                  timestamp: '2026-01-25T10:30:00.000Z'
                  elapsed: 20
                  version: '1.0.0'
                  requestId: 'ghi-789'
        '401':
          description: Unauthorized - API key required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:
  securitySchemes:
    ApiKeyAuth:
      type: http
      scheme: bearer
      bearerFormat: API Key
      description: 'API key authentication. Format: Bearer kraw_your_key_here'

    ShopSyncAuth:
      type: http
      scheme: bearer
      description: ShopSync authentication token

    EnderStorageAuth:
      type: http
      scheme: bearer
      description: Ender storage authentication token

  schemas:
    SuccessResponse:
      type: object
      required:
        - success
        - data
        - meta
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          description: Response data (varies by endpoint)
        meta:
          type: object
          required:
            - timestamp
            - elapsed
            - version
            - requestId
          properties:
            timestamp:
              type: string
              format: date-time
              description: Server timestamp
            elapsed:
              type: integer
              description: Request processing time in milliseconds
            version:
              type: string
              description: API version
              example: '1.0.0'
            requestId:
              type: string
              format: uuid
              description: Unique request identifier
            rateLimit:
              type: object
              description: Rate limit information (when authenticated)
              properties:
                limit:
                  type: integer
                  description: Maximum requests per hour
                remaining:
                  type: integer
                  description: Remaining requests in window
                reset:
                  type: integer
                  description: Unix timestamp when limit resets

    ErrorResponse:
      type: object
      required:
        - success
        - error
        - meta
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: string
              description: Error code
              enum:
                - VALIDATION_ERROR
                - UNAUTHORIZED
                - INVALID_API_KEY
                - RATE_LIMIT_EXCEEDED
                - NOT_FOUND
                - INTERNAL_ERROR
                - BAD_REQUEST
            message:
              type: string
              description: Human-readable error message
            details:
              type: object
              description: Additional error details
        meta:
          type: object
          properties:
            timestamp:
              type: string
              format: date-time
            elapsed:
              type: integer
            version:
              type: string
            requestId:
              type: string
              format: uuid

    Player:
      type: object
      properties:
        minecraftUUID:
          type: string
          format: uuid
          description: Player's Minecraft UUID
          example: 'd98440d6-5117-4ac8-bd50-70b086101e3e'
        minecraftName:
          type: string
          description: Player's Minecraft username
          example: 'Twijn'
        kromerAddress:
          type: string
          description: 10-character Kromer address
          example: 'ks0d5iqb6p'
        notifications:
          type: string
          enum: [none, self, all]
          description: Notification preference
          example: 'none'
        createdDate:
          type: string
          format: date-time
          nullable: true
        updatedDate:
          type: string
          format: date-time
          nullable: true
        online:
          type: boolean
          description: Whether the player is currently online

    Shop:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
          nullable: true
        owner:
          type: string
          nullable: true
        computerId:
          type: integer
        softwareName:
          type: string
          nullable: true
        softwareVersion:
          type: string
          nullable: true
        locationCoordinates:
          type: string
          nullable: true
        locationDescription:
          type: string
          nullable: true
        locationDimension:
          type: string
          nullable: true
        items:
          type: array
          items:
            $ref: '#/components/schemas/Item'
        addresses:
          type: array
          items:
            type: string
        createdDate:
          type: string
          format: date-time
          nullable: true
        updatedDate:
          type: string
          format: date-time
          nullable: true

    Item:
      type: object
      properties:
        id:
          type: string
        shopId:
          type: string
        itemName:
          type: string
        itemNbt:
          type: string
          nullable: true
        itemDisplayName:
          type: string
          nullable: true
        itemDescription:
          type: string
          nullable: true
        shopBuysItem:
          type: boolean
          nullable: true
        noLimit:
          type: boolean
          nullable: true
        dynamicPrice:
          type: boolean
        madeOnDemand:
          type: boolean
        requiresInteraction:
          type: boolean
        stock:
          type: integer
        prices:
          type: array
          items:
            $ref: '#/components/schemas/Price'
        addresses:
          type: array
          items:
            type: string
        createdDate:
          type: string
          format: date-time
          nullable: true
        updatedDate:
          type: string
          format: date-time
          nullable: true

    Price:
      type: object
      properties:
        id:
          type: string
        value:
          type: number
          format: double
        currency:
          type: string
        address:
          type: string
          nullable: true
        requiredMeta:
          type: string
          nullable: true

    KnownAddress:
      type: object
      properties:
        id:
          type: string
        type:
          type: string
          enum: [official, shop, gamble, service, company]
          description: Type of known address
        address:
          type: string
          description: 10-character Kromer address
        imageSrc:
          type: string
          nullable: true
          description: Optional image URL
        name:
          type: string
        description:
          type: string
        createdDate:
          type: string
          format: date-time
          nullable: true
        updatedDate:
          type: string
          format: date-time
          nullable: true

    ApiKeyInfo:
      type: object
      description: API key information with optional usage statistics
      properties:
        id:
          type: string
          format: uuid
          description: Unique API key ID
        name:
          type: string
          description: Name/description of the API key
        email:
          type: string
          nullable: true
          description: Email associated with the key
        tier:
          type: string
          enum: [free, premium]
          description: API key tier
        rateLimit:
          type: integer
          description: Maximum requests per hour
        isActive:
          type: boolean
          description: Whether the key is currently active
        requestCount:
          type: integer
          description: Total number of requests made with this key
        lastUsedAt:
          type: string
          format: date-time
          nullable: true
          description: Last time the key was used
        createdAt:
          type: string
          format: date-time
          description: When the key was created
        usage:
          $ref: '#/components/schemas/ApiKeyUsage'

    ApiKeyUsage:
      type: object
      description: Detailed API key usage statistics
      properties:
        totalRequests:
          type: integer
          description: Total number of logged requests
        last24h:
          type: integer
          description: Requests in the last 24 hours
        last7d:
          type: integer
          description: Requests in the last 7 days
        last30d:
          type: integer
          description: Requests in the last 30 days
        blockedRequests:
          type: integer
          description: Number of blocked requests (rate limited)
        avgResponseTimeMs:
          type: number
          nullable: true
          description: Average response time in milliseconds
        topEndpoints:
          type: array
          description: Top 5 most used endpoints
          items:
            type: object
            properties:
              path:
                type: string
                description: Endpoint path
              count:
                type: integer
                description: Number of requests

    RequestLog:
      type: object
      description: Individual request log entry
      properties:
        requestId:
          type: string
          description: Unique request identifier
        timestamp:
          type: string
          format: date-time
          description: When the request was made
        method:
          type: string
          description: HTTP method
        path:
          type: string
          description: Request path
        responseStatus:
          type: integer
          nullable: true
          description: HTTP response status code
        responseTimeMs:
          type: number
          nullable: true
          description: Response time in milliseconds
        wasBlocked:
          type: boolean
          description: Whether the request was blocked
        blockReason:
          type: string
          nullable: true
          description: Reason for blocking (if blocked)

    ShopSyncData:
      type: object
      description: Full ShopSync data structure for shop creation/updates
      required:
        - info
        - items
      properties:
        info:
          type: object
          required:
            - name
            - computerID
          properties:
            name:
              type: string
            description:
              type: string
            owner:
              type: string
            computerID:
              type: integer
            software:
              type: object
              properties:
                name:
                  type: string
                version:
                  type: string
            location:
              type: object
              properties:
                coordinates:
                  type: array
                  items:
                    type: number
                  minItems: 3
                  maxItems: 3
                description:
                  type: string
                dimension:
                  type: string
        items:
          type: array
          items:
            type: object
            required:
              - name
              - prices
            properties:
              name:
                type: string
              nbt:
                type: string
              displayName:
                type: string
              description:
                type: string
              shopBuysItem:
                type: boolean
              noLimit:
                type: boolean
              dynamicPrice:
                type: boolean
              madeOnDemand:
                type: boolean
              requiresInteraction:
                type: boolean
              stock:
                type: integer
              prices:
                type: array
                items:
                  type: object
                  required:
                    - value
                    - currency
                  properties:
                    value:
                      type: number
                    currency:
                      type: string
                    address:
                      type: string
                    requiredMeta:
                      type: string
